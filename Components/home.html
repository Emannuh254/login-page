<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FlipMarket | Home</title>
    <link rel="stylesheet" href="../Css/home.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <!-- rest of page content -->

    <div class="overlay" id="overlay"></div>

    <main class="container">
      <section class="card profile-card">
        <img src="/images/user.png" alt="Default User" class="profile-img" />
        <h2>Emmanuel Mutugi</h2>
        <p class="username">@mannuh</p>
        <p>Email: emmanuel@example.com</p>
      </section>

      <section class="card referrals-card">
        <h2>Your Referrals</h2>
        <p>Referrals: <strong>15 users</strong></p>
        <p>Total Earned: <strong>Ksh 4,500</strong></p>
        <button class="btn">Share Link</button>
      </section>

      <section class="card charts-section">
        <div class="chart-card">
          <h3>Bots Usage</h3>
          <canvas id="usageChart"></canvas>
        </div>
        <div class="chart-card">
          <h3>User Reviews</h3>
          <canvas id="reviewsChart"></canvas>
        </div>
      </section>
    </main>

    <footer>Â© 2025 FlipMarket</footer>
    <script src="../Js/home.js"></script>
    <script>
      // Load the navbar HTML dynamically into placeholder
      fetch("/Components/navbar.html") // Adjust path if needed
        .then((response) => response.text())
        .then((html) => {
          document.getElementById("navbar-placeholder").innerHTML = html;

          // Set up the navbar toggle logic
          const hamburgerBtn = document.getElementById("hamburger-btn");
          const navbar = document.getElementById("navbar");
          const overlay = document.getElementById("overlay");
          const navLinks = navbar.querySelectorAll("ul.nav-links li a");

          function closeNavbar() {
            navbar.classList.remove("active");
            overlay.classList.remove("active");
            hamburgerBtn.setAttribute("aria-expanded", "false");
            navbar.setAttribute("aria-hidden", "true");
          }

          function openNavbar() {
            navbar.classList.add("active");
            overlay.classList.add("active");
            hamburgerBtn.setAttribute("aria-expanded", "true");
            navbar.setAttribute("aria-hidden", "false");
          }

          hamburgerBtn.addEventListener("click", () => {
            if (navbar.classList.contains("active")) {
              closeNavbar();
            } else {
              openNavbar();
            }
          });

          overlay.addEventListener("click", closeNavbar);

          navLinks.forEach((link) => {
            link.addEventListener("click", closeNavbar);
          });
        })
        .catch((err) => {
          console.error("Error loading navbar:", err);
        });
    </script>
  </body>
</html>
